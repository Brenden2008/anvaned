<!-- This is a static file -->
<!-- served from your routes in server.js -->
<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <title>MarkMe!</title>
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta
      name="description"
      content="A simple, yet another markdown to HTML converter."
    />
    <link
      id="favicon"
      rel="icon"
      href="https://cdn.glitch.com/e0b394db-80ae-4783-a487-56cecfa7615a%2Fmarkme.png?v=1589130350996"
      type="image/png"
    />
    <link rel="stylesheet" href="/style.css" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.2/styles/night-owl.min.css"
    />

    <!-- Primary Meta Tags -->
    <title>MarkMe!</title>
    <meta name="title" content="MarkMe!" />
    <meta
      name="description"
      content="A simple, yet another markdown to HTML converter."
    />

    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://markme.glitch.me/" />
    <meta property="og:title" content="MarkMe!" />
    <meta
      property="og:description"
      content="A simple, yet another markdown to HTML converter."
    />
    <meta
      property="og:image"
      content="https://cdn.glitch.com/e0b394db-80ae-4783-a487-56cecfa7615a%2Fmarkme%20(1).png?v=1589130880448"
    />

    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image" />
    <meta property="twitter:url" content="https://markme.glitch.me/" />
    <meta property="twitter:title" content="MarkMe!" />
    <meta
      property="twitter:description"
      content="A simple, yet another markdown to HTML converter."
    />
    <meta
      property="twitter:image"
      content="https://cdn.glitch.com/e0b394db-80ae-4783-a487-56cecfa7615a%2Fmarkme%20(1).png?v=1589130880448"
    />

    <!-- $('#mydiv').text().length -->
    <script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>

    <script src="/pwa.js"></script>
    <link rel="manifest" href="/manifest.json" />
  </head>
  <body>
    <div id="app">
      <div id="mdel">
        <button id="h1" @click="insert('h1')">
          H1
        </button>
        <button id="h2" @click="insert('h2')">
          H2
        </button>
        <button id="h3" @click="insert('h3')">
          H3
        </button>
        <button id="h4" @click="insert('h4')">
          H4
        </button>
        <button id="h5" @click="insert('h5')">
          H5
        </button>
        <button id="h6" @click="insert('h6')">
          H6
        </button>
        <button id="italic" @click="insert('italic')">
          <i>I</i>
        </button>
        <button id="bold" @click="insert('bold')">
          <b>B</b>
        </button>
        <button id="strike" @click="insert('strike')">
          <strike>S</strike>
        </button>
        <button id="ul" @click="insert('ul')">
          ‚óè
        </button>
        <button id="ol" @click="insert('ol')">
          1.
        </button>
        <button id="quote" @click="insert('quote')">
          &gt;
        </button>
        <button id="inline" @click="insert('inline')">
          I&lt;&gt;
        </button>
        <button id="block" @click="insert('block')">
          &lt;&gt;B
        </button>
        <button id="hr" @click="insert('hr')">
          ---
        </button>
        <button id="a" @click="insert('a')">
          A
        </button>
        <button id="download" @click="visible === false ? show() : hide()">
          üíæ
        </button>
        <button id="toggle" @click="darktheme === true ? light() : dark()">
          üåô
        </button>
        <div id="down-pop">
          <button @click="download('markdown.txt', editor.value);">
            MARKDOWN
          </button>
          <button
            @click="download('html.txt', document.getElementById('md-html').innerHTML);"
          >
            HTML
          </button>
        </div>
      </div>

      <!-- Add line breaks forever -->
      <br /><br />

      <textarea id="md-editor" v-model="md" v-on:keyup="convert"></textarea>

      <div id="md-html" v-html="html"></div>

      <footer>
        <span class="markme">
          MARKME!
        </span>
        <span class="center" style="background-color:var(--border)" @click="hidemdtext === 'Hide' ? hidemd() : showmd()">
          {{hidemdtext}} Markdown 
        </span>
        <span class="center" style="background-color:var(--border)" @click="hidehtmltext === 'Hide' ? hidehtml() : showhtml()">
          {{hidehtmltext}} HTML
        </span>
        <span class="footer-text">
          <a href="https://github.com/khalby786/MarkMe" target="_blank"
            >GitHub</a
          >
          <a href="https://twitter.com/khalby786" target="_blank">Twitter</a>
          <a href="/help" target="_blank">Help</a>
        </span>
        <span id="words" class="footer-text"></span>
        <span id="chars" class="footer-text"></span>
      </footer>
    </div>
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
<!--     <script src="https://cdn.jsdelivr.net/npm/vue"></script> -->
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.0.2/highlight.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js?config=TeX-AMS-MML_HTMLorMML&delayStartupUntil=configured"></script>
    <script src="/script.js" defer></script>
    <script>
      window.onkeyup = () => {
        var i,
          text,
          code,
          codes = document.getElementsByTagName("code");
        for (i = 0; i < codes.length; ) {
          code = codes[i];
          if (
            code.parentNode.tagName !== "PRE" &&
            code.childElementCount === 0
          ) {
            text = code.textContent;
            if (/^\$[^$]/.test(text) && /[^$]\$$/.test(text)) {
              text = text.replace(/^\$/, "\\(").replace(/\$$/, "\\)");
              code.textContent = text;
            }
            if (
              /^\\\((.|\s)+\\\)$/.test(text) ||
              /^\\\[(.|\s)+\\\]$/.test(text) ||
              /^\$(.|\s)+\$$/.test(text) ||
              /^\\begin\{([^}]+)\}(.|\s)+\\end\{[^}]+\}$/.test(text)
            ) {
              code.outerHTML = code.innerHTML; // remove <code></code>
              continue;
            }
          }
          i++;
        }

        $("#chars").text($("#md-html").text().length + " chars");
        var words = document
          .getElementById("md-html")
          .innerText.match(/\b[-?(\w+)?]+\b/gi);
        if (words = "") {
          document.getElementById("words").innerText = 0 + " words";  
        } else {
          document.getElementById("words").innerText = words.length + " words";
        }
        var pres = document.querySelectorAll("pre>code");
        for (var i = 0; i < pres.length; i++) {
          hljs.highlightBlock(pres[i]);
        }
      };
    </script>
  </body>
</html>
